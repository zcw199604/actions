name: 定时示例 - 每日运行

on:
  schedule:
    - cron: "0 2 * * *"
  workflow_dispatch: {}

concurrency:
  group: scheduled-${{ github.workflow }}
  cancel-in-progress: false

permissions:
  contents: read

jobs:
  run:
    name: 运行脚本
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.x"

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20"

      - name: 运行 Bash 脚本
        shell: bash
        run: |
          set -euo pipefail
          bash scripts/hello.sh --name "scheduled"

      - name: 运行 Python 脚本
        shell: bash
        run: |
          set -euo pipefail
          python scripts/hello.py --name "scheduled"

      - name: 运行 Node.js 脚本
        shell: bash
        run: |
          set -euo pipefail
          node scripts/hello.js --name "scheduled"

