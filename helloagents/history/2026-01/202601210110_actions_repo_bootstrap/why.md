# 变更提案: GitHub Actions 仓库初始化（标准模板）

## 需求背景
当前仓库为新建项目，目标是在一个仓库内集中管理多种 GitHub Actions 工作流，覆盖手动触发与定时触发两类场景，并支持在工作流中组合第三方 action 与自定义脚本（bash / Python / Node.js）。

## 产品分析

### 目标用户与场景
- **用户群体:** 仓库维护者、需要执行自动化任务的开发者
- **使用场景:** 手动触发一次性任务（如批处理、巡检）、定时执行例行任务（如每日/每周维护）
- **核心痛点:** 每次新增工作流都需要从零搭建，结构与安全约定不统一，维护成本高

### 价值主张与成功指标
- **价值主张:** 提供可直接复制复用的工作流与脚本模板，统一约定，降低新增成本
- **成功指标:**
  - 新增一个 workflow 的“从复制模板到跑通”时间 ≤ 5 分钟
  - 手动触发与定时触发示例在默认 Runner 上可成功运行
  - 默认权限最小化，README 明确 secrets 与权限策略

### 人文关怀
避免将敏感信息写入仓库；以最小权限为默认，减少误操作与潜在安全风险。

## 变更内容
1. 完善 README（中文），作为仓库入口与新增 workflow 指南
2. 新增手动触发与定时触发工作流示例，覆盖 bash / Python / Node.js 脚本调用方式
3. 新增最小可运行脚本示例，统一输出与退出码约定
4. 增加常用仓库基础文件（如 `.editorconfig`、`.gitignore`、依赖更新配置等）

## 影响范围
- **模块:** workflows、scripts、docs
- **文件:** README、`.github/workflows/*`、`scripts/*`、仓库基础配置文件
- **API:** 无
- **数据:** 无

## 核心场景

### 需求: 手动触发工作流模板
**模块:** workflows
提供 `workflow_dispatch` 工作流模板，支持输入参数（可选），并示例性地调用脚本。

#### 场景: 手动触发运行脚本
在 Actions 页面手动选择 workflow 并触发，观察脚本输出与退出状态。
- 能通过输入参数控制脚本行为（如名称/开关）
- 成功/失败可清晰定位

### 需求: 定时任务工作流模板
**模块:** workflows
提供 `schedule` 工作流模板，支持 cron 定时触发，并具备并发控制。

#### 场景: 定时运行脚本
按 cron 定时执行脚本任务，避免同一时间重复执行造成冲突。
- 按计划触发并运行
- 支持并发限制与可追溯日志

### 需求: 多语言脚本示例
**模块:** scripts
提供 bash / Python / Node.js 三种脚本示例，便于复制复用与本地调试。

#### 场景: 统一输出与退出码
脚本输出关键参数与摘要，失败返回非 0。
- 本地可直接运行
- 在 workflow 中可直接调用

### 需求: README 与新增工作流指南
**模块:** docs
README 需包含快速开始、目录结构、如何新增 workflow、Secrets 与权限策略等栏目。

#### 场景: 复制模板新增 workflow
开发者根据 README 指南复制示例并修改后即可跑通。
- 明确新增文件位置与命名约定
- 明确需要的权限与 secrets

## 风险评估
- **风险:** workflow 误用高权限或错误输出敏感信息
- **缓解:** 默认最小权限；README 明确 secrets 与权限规范；建议使用 dependabot 更新第三方 actions

